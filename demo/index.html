<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Squatch.JS Playground</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="./dist/squatchjs.min.js"></script>
    <script>
      const widget = document.querySelector("squatch-embed");
      widget.updateLocale("en_CA");
    </script>
    <script>
      if (
        window.location.pathname.includes("passwordless") &&
        !window.location.search.length <= 1
      ) {
        window.squatchTenant = "test_a8b41jotf8a1v";
        window.squatchConfig = {
          domain: "https://staging.referralsaasquatch.com",
        };
        document.addEventListener("DOMContentLoaded", function (event) {
          const element = document.getElementById("unauthed-stuff");
          document.getElementById("authed-stuff").innerHTML = "";
          element.innerHTML = /*html*/ `
          <button onclick="javascript:document.getElementById('squatch-popup-friend').open()">
            Open passwordless widget
          </button>
          <squatch-popup
            widget="p/jayden-qa-obj/w/websiteReferralWidget"
            id="squatch-popup-friend"
          ></squatch-popup>
          <squatch-embed locale="fr_FR" widget="p/jayden-qa-obj/w/friendWidget"></squatch-embed>
          `;
        });
      } else if (window.location.pathname.includes("passwordless")) {
        document.addEventListener("DOMContentLoaded", function (event) {
          const element = document.getElementById("unauthed-stuff");
          document.getElementById("authed-stuff").innerHTML = "";
          element.innerHTML = /*html*/ `
          <button onclick="javascript:document.getElementById('squatch-popup-friend').open()">
            Open passwordless widget
          </button>
          <squatch-popup
            widget="p/jayden-qa-obj/w/friendWidget"
            id="squatch-popup-friend"
          ></squatch-popup>
          `;
        });
      } else {
        if (window.location.search) window.location.search = "";

        document.addEventListener("DOMContentLoaded", function (event) {
          const element = document.getElementById("authed-stuff");

          document.getElementById("unauthed-stuff").innerHTML = "";
          document.cookie = "_saasquatch=";

          element.innerHTML = /*html*/ `
          <squatch-popup widget="w/ir-tester" open><button>click me!</button></squatch-popup>
          <squatch-popup widget="w/mint-tester"><button>click me too!</button></squatch-popup>
          <button class="squatchpop">Squatchpop cta</button>
          <button onclick="javascript:document.getElementById('squatch-embed').open()">
            Open embedded widget
          </button>
          <button onclick="javascript:document.getElementById('squatch-embed').close()">
            Close embedded widget
          </button>

          <squatch-embed locale="en_CA" widget="w/ir-tester">Loading...</squatch-embed>
          <squatch-embed
            widget="w/ir-tester"
            id="squatch-embed"
            container="#widget-container"
          ></squatch-embed>


          <div
            id="widget-container"
            style="
              position: absolute;
              width: 500px;
              height: 500px;
              right: 0;
              top: 0;
            "
          ></div>
        `;
        });
        window.squatchTenant = "test_a8b41jotf8a1v";
        window.squatchToken =
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiaXJ0ZXN0IiwiYWNjb3VudElkIjoiaXJ0ZXN0In0sImVudiI6eyJ0ZW5hbnRBbGlhcyI6InRlc3RfYThiNDFqb3RmOGExdiIsImRvbWFpbiI6Imh0dHBzOi8vc3RhZ2luZy5yZWZlcnJhbHNhYXNxdWF0Y2guY29tIn19.8I5Kktmb6T3jowYwScZouqSliHRVF3YuFa-atphL2DA";
        window.squatchConfig = {
          domain: "https://staging.referralsaasquatch.com",
        };
      }
    </script>
  </head>

  <body>
    <!-- Authorized Widgets -->
    <div id="authed-stuff"></div>
    <!-- /Authorized Widgets  -->

    <!-- Passwordless widget -->
    <div id="unauthed-stuff"></div>
    <!-- /Passwordless widget -->
  </body>
</html>
